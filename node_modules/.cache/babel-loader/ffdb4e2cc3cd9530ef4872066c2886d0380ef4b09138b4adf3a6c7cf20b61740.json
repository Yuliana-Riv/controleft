{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { mapActions } from 'vuex';\nimport AddPrj from './addProject.vue';\nimport EditPrj from './editProject.vue';\nexport default {\n  name: 'project',\n  components: {\n    AddPrj,\n    EditPrj\n  },\n  data() {\n    return {\n      status: '',\n      message: '',\n      item: '',\n      search_value: '',\n      updsearchcli: '',\n      currentPage: 1,\n      itemsPerPage: 12,\n      active: false,\n      viewModal: false,\n      itemDel: '',\n      radius: false,\n      destacados: []\n    };\n  },\n  created() {\n    this.getAllInfoPrj('project');\n  },\n  updated() {\n    if (this.search_value != this.updsearchcli) {\n      this.updsearchcli = this.search_value;\n      let option = 'project';\n      let value = this.search_value;\n      let payload = {\n        option: option,\n        search: value\n      };\n      if (value != \"\") {\n        this.$store.dispatch(\"project/searchPrj\", payload);\n      } else {\n        this.getAllInfoPrj('project');\n      }\n    }\n  },\n  computed: {\n    data() {\n      let array = this.$store.getters[\"project/data\"];\n      let encontrados = [];\n      for (const item of array) {\n        if (item.orden != 'NA') {\n          encontrados.push(item);\n        }\n      }\n      this.destacados = encontrados;\n      return array;\n    },\n    historyOption() {\n      return this.$store.getters[\"project/getHistoryOption\"];\n    },\n    //Paginacion\n    allItems() {\n      return Object.keys(this.data).map(pid => this.data[pid]);\n    },\n    filteredItems() {\n      return this.allItems.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage);\n    },\n    totalPages() {\n      let total = Math.ceil(this.allItems.length / this.itemsPerPage);\n      if (total < this.currentPage) {\n        this.currentPage = 1;\n      }\n      return total;\n    }\n  },\n  methods: {\n    ...mapActions('project', ['getAllInfoPrj']),\n    ...mapActions('project', ['setHistoryOptionPrj']),\n    ...mapActions('project', ['setAddedPrj']),\n    changeView(option, item) {\n      this.item = item;\n      this.setAddedPrj(item);\n      this.setHistoryOptionPrj(option);\n    },\n    activeRadius() {\n      this.radius ? this.radius = false : this.radius = true;\n    },\n    showModal: function (id) {\n      this.itemDel = id;\n      this.viewModal = true;\n    },\n    closeModal: function () {\n      this.viewModal = false;\n      this.itemDel = '';\n    },\n    wait: function () {\n      setTimeout(() => this.$router.go(), 200);\n    },\n    delStatus: function () {\n      setTimeout(() => this.delMsgs(), 2000);\n      setTimeout(() => this.wait(), 500);\n    },\n    delMsgs: function () {\n      this.status = \"\";\n      this.message = \"\";\n    },\n    eliminar: async function () {\n      let id = this.itemDel;\n      this.status = '';\n      this.message = '';\n      let result = await this.$store.dispatch(\"project/deleteItemPrj\", {\n        option: 'project',\n        id: id\n      });\n      if (result.status == 'error') {\n        this.message = result.message;\n        this.status = 'error';\n        this.delStatus();\n      } else {\n        this.status = '';\n        this.message = '';\n        this.wait();\n      }\n    },\n    closeSelect() {\n      document.getElementById(\"select-ch\").checked = false;\n      this.active = false;\n    },\n    search: async function (value) {\n      let option = 'project';\n      let payload = {\n        option: option,\n        search: value\n      };\n      if (value != \"\") {\n        this.$store.dispatch(\"project/searchPrj\", payload);\n      } else {\n        this.getAllInfoPrj('project');\n      }\n    },\n    // botones de paginacion.\n    next() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n      }\n    },\n    prev() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";AA8JA;AACA;AACA;AAEA;EACAA;EACAC;IACAC;IACAC;EACA;EACAC;IACA;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IAGA;EACA;EACAC;IACA;EACA;EAGAC;IAGA;MACA;MAEA;MAEA;MAIA;QACAC;QACAC;MACA;MACA;QACA;MACA;QACA;MACA;IACA;EAGA;EACAC;IACAjB;MACA;MACA;MACA;QACA;UACAkB;QACA;MACA;MACA;MACA;IACA;IACAC;MACA;IACA;IAGA;IACAC;MACA;IACA;IACAC;MAEA;IACA;IACAC;MACA;MACA;QACA;MACA;MACA;IACA;EACA;EACAC;IAEA;IACA;IACA;IAEAC;MACA;MACA;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IAEAC;MACAC;IACA;IAEAC;MACAD,iCACA;MACAA,8BACA;IAEA;IACAE;MACA;MACA;IACA;IAEAC;MACA;MACA;MACA;MAEA;QAAAjB;QAAAkB;MAAA;MAEA;QACA;QACA;QACA;MAEA;QACA;QACA;QACA;MACA;IACA;IACAC;MACAC;MACA;IACA;IAOAnB;MACA;MAGA;QACAD;QACAC;MACA;MACA;QACA;MACA;QACA;MACA;IACA;IAGA;IACAoB;MAEA;QACA;MACA;IACA;IACAC;MACA;QACA;MACA;IACA;EAKA;AACA","names":["name","components","AddPrj","EditPrj","data","status","message","item","search_value","updsearchcli","currentPage","itemsPerPage","active","viewModal","itemDel","radius","destacados","created","updated","option","search","computed","encontrados","historyOption","allItems","filteredItems","totalPages","methods","changeView","activeRadius","showModal","closeModal","wait","setTimeout","delStatus","delMsgs","eliminar","id","closeSelect","document","next","prev"],"sourceRoot":"src/views/project","sources":["project.vue"],"sourcesContent":["<template>\r\n    <div id=\"project\">\r\n           \r\n             <div v-if=\"historyOption =='Default'\">\r\n                   <div class=\"dflx\">\r\n                        <p class=\"noitems\">No. de items <span v-if=\"data != 'No se encontraron coincidencias.'\">{{data.length}}</span> <span v-else>0</span> </p>\r\n                         \r\n        <div class=\"select-container\">\r\n          <input type=\"checkbox\" name=\"select-ch\" id=\"select-ch\" v-model=\"active\" true-value=\"true\" false-value=\"false\"/>\r\n          <label for=\"select-ch\">\r\n            <div id=\"select-items\" :class=\"{'rounded' : active}\">\r\n                Items por página: {{itemsPerPage}}\r\n            </div>\r\n          </label>\r\n          <div class=\"options-cont\" @click=\"closeSelect()\">\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"6\"\r\n              @click=\"itemsPerPage = '6'\"\r\n            >\r\n              6\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"12\"\r\n              @click=\"itemsPerPage = '12'\"\r\n            >\r\n              12\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"18\"\r\n              @click=\"itemsPerPage = '18'\"\r\n            >\r\n              18\r\n            </div>\r\n            <div\r\n              class=\"option-btn\"\r\n              v-bind:value=\"24\"\r\n              @click=\"itemsPerPage = '24'\"\r\n            >\r\n              24\r\n            </div>\r\n          </div>\r\n        </div>\r\n                         <div class=\"buscador dflx\">\r\n                              <input v-model=\"search_value\" type=\"search\" id=\"input-search\" class=\"form-control\" :placeholder=\"'Búsqueda'\"  />\r\n                              <div class=\"icon_buscar\">\r\n                              <img @click=\"search(search_value)\" src=\"../../assets/Search.png\" alt=\"icono buscar\">\r\n                              </div>\r\n\r\n                        </div>\r\n\r\n\r\n\r\n\r\n\r\n                   </div>\r\n\r\n                     <div  @click=\"changeView('Add','')\"  class=\"btn_añadir dflx\">\r\n                                <p  > AGREGAR</p>  <img src=\"../../assets/add.png\" alt=\"\">\r\n                     </div>\r\n\r\n\r\n                       <div class=\"tbl_project\">\r\n            <div class=\"tbl_header dflx\">\r\n                <div class=\"tblh tblrad tlarg\">\r\n                    <p>TITULO</p>\r\n                </div>\r\n                 <div class=\"tblh \">\r\n                   <p>VISIBILIDAD</p>\r\n                </div>\r\n                 <div class=\"tblh2 \">\r\n                   \r\n                    <p>EDITAR</p>\r\n                </div>\r\n                 <div class=\"tblh2  tblh2r \">\r\n                   \r\n                    <p>BORRAR</p>\r\n                </div>\r\n                 \r\n                 \r\n            </div>\r\n            \r\n            <div tbl_content>\r\n                <div  v-if=\"data != 'No se encontraron coincidencias.' && data != 'error'\">\r\n                    <div class=\"tbl_items dflx\" v-for=\"(item, key) in filteredItems\" :key=\"key\">\r\n                        <div class=\"tbl_item tlarg \">\r\n                           <a class=\"btn-ver\" href=\"/projects\" target=\"_blank\">{{item.title}}  </a>  \r\n                        </div>\r\n                        <div class=\"tbl_item \">\r\n                               <p>{{item.statusproject}}</p>\r\n                        </div>\r\n                       \r\n                            <div class=\"icon_editar\">\r\n                                <img   @click=\"changeView('Edit',item)\" src=\"../../assets/i_editar.png\" alt=\"icono editar\"   >\r\n                            </div>\r\n                            <div class=\"icon_eliminar\">\r\n                                <img  @click=\"showModal(item.id)\" src=\"../../assets/i_eliminar.png\" alt=\"icono eliminar\" >\r\n                            </div>\r\n                        \r\n                    </div>\r\n                </div>\r\n                <div v-else>\r\n                    <p class=\"snu\">Aun no hay registros.</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n          <div  id=\"navigate-buttons\" class=\"mlf\">\r\n                    <div class=\"dflx\">\r\n                        <button @click=\"prev\" id=\"btn-prev\" class=\"btn-navigate  \"><img src=\"../../assets/Left.png\" alt=\"icono anterior\"></button>\r\n                        <p class=\"num-pages\">{{currentPage}} / {{totalPages}}</p>\r\n                        <button @click=\"next\"  id=\"btn-next\" class=\"btn-navigate  \"><img src=\"../../assets/Right.png\" alt=\"icono siguiente\"></button>\r\n                     </div>\r\n        </div>\r\n\r\n\r\n\r\n             </div>\r\n             <div v-if=\"historyOption =='Add'\">\r\n                 <!-- Agregar project -->\r\n                 <AddPrj/>\r\n             </div>\r\n             <div v-if=\"historyOption =='Edit'\">\r\n               <!-- Editar project -->\r\n               <EditPrj/>\r\n             </div>\r\n         \r\n\r\n\r\n             <div v-if=\"status !=''\" class=\"status_messages\">\r\n                            <div v-if=\"status =='success'\" class=\"msg msg_success\">\r\n                                 <p>{{message}}</p>\r\n                            </div>\r\n                            <div  v-if=\"status =='error'\" class=\"msg msg_error\">\r\n                                <p>{{message}}</p>\r\n                            </div>\r\n        </div>\r\n\r\n         \r\n           <div v-if=\"viewModal\" class=\"modal_view\">\r\n           \r\n            <div id=\"modal_delete\">\r\n                <div class=\"body\">\r\n                     <img src=\"../../assets/alert.png\" alt=\"icono alerta\">\r\n            <h3 >¿Estás seguro de  <span>eliminar <br> este proyecto?</span></h3>\r\n                </div>\r\n           \r\n            <div class=\"modal_del_btns dflx\">\r\n                <p @click=\"eliminar()\">Aceptar</p>   <p  @click=\"closeModal()\" >Cancelar</p>\r\n            </div>\r\n          </div>\r\n        </div> \r\n        \r\n    </div>\r\n</template>\r\n<script>\r\nimport {mapActions} from 'vuex';\r\nimport AddPrj from './addProject.vue';\r\nimport EditPrj from './editProject.vue';\r\n\r\nexport default {\r\n  name: 'project',\r\n  components:{\r\n   AddPrj,\r\n   EditPrj \r\n  },\r\n    data(){\r\n       return{\r\n        \r\n           status:'',\r\n           message:'',\r\n           item: '',\r\n           search_value:'',\r\n           updsearchcli:'',\r\n           currentPage: 1,\r\n           itemsPerPage:   12,\r\n           active:false,\r\n           viewModal:false,\r\n           itemDel:'',\r\n           radius:false,\r\n           destacados:[],\r\n\r\n\r\n       }\r\n   },\r\n  created() {\r\n     this.getAllInfoPrj('project')\r\n  },\r\n  \r\n\r\n   updated(){\r\n       \r\n\r\n         if(this.search_value != this.updsearchcli){\r\n            this.updsearchcli = this.search_value\r\n\r\n            let option = 'project';\r\n           \r\n            let value = this.search_value\r\n          \r\n           \r\n          \r\n            let payload ={\r\n              option : option,\r\n              search: value\r\n            }\r\n            if(value!=\"\"){\r\n                this.$store.dispatch(\"project/searchPrj\", payload);\r\n            }else{\r\n               this.getAllInfoPrj('project')\r\n            }\r\n         }\r\n\r\n         \r\n    },\r\n  computed:{\r\n     data() {\r\n       let array =this.$store.getters[\"project/data\"];\r\n         let encontrados=[]\r\n            for (const item of array) {\r\n                if(item.orden !='NA'){\r\n                    encontrados.push(item)\r\n                }\r\n            }\r\n            this.destacados = encontrados\r\n             return array\r\n        },\r\n         historyOption(){\r\n            return this.$store.getters[\"project/getHistoryOption\"]\r\n        },\r\n\r\n        \r\n          //Paginacion\r\n        allItems () {\r\n            return Object.keys(this.data).map(pid => this.data[pid])\r\n        },\r\n        filteredItems () {\r\n        \r\n             return  this.allItems.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage )\r\n        },\r\n        totalPages () {\r\n            let total = Math.ceil(this.allItems.length / this.itemsPerPage)\r\n                if(total < this.currentPage){\r\n                this.currentPage =1\r\n                }\r\n        return total\r\n       },\r\n  },\r\n  methods:{\r\n        \r\n       ...mapActions('project', ['getAllInfoPrj']),\r\n           ...mapActions('project', ['setHistoryOptionPrj']),\r\n         ...mapActions('project', ['setAddedPrj']),\r\n\r\n           changeView(option, item){\r\n             this.item=item\r\n             this.setAddedPrj(item)\r\n             this.setHistoryOptionPrj(option)\r\n         },\r\n\r\n         activeRadius(){\r\n             this.radius? this.radius =false:  this.radius =true;\r\n         },\r\n\r\n         showModal: function(id){\r\n             this.itemDel =id;\r\n             this.viewModal=true\r\n         },\r\n         closeModal:function(){\r\n             this.viewModal=false;\r\n             this.itemDel =''\r\n         },\r\n\r\n           wait: function(){\r\n            setTimeout(() => this.$router.go(), 200);\r\n        },\r\n\r\n          delStatus: function () {\r\n            setTimeout(() => this.delMsgs()\r\n            ,2000);\r\n            setTimeout(() => this.wait()\r\n            ,500);\r\n            \r\n        },\r\n        delMsgs: function(){\r\n            this.status=\"\"\r\n            this.message=\"\"\r\n        },\r\n\r\n        eliminar: async function(){\r\n            let id = this.itemDel\r\n            this.status='';\r\n            this.message='';\r\n\r\n             let result = await this.$store.dispatch(\"project/deleteItemPrj\", {option: 'project', id:id});\r\n           \r\n            if(result.status=='error'){\r\n            this.message = result.message;\r\n            this.status='error'\r\n            this.delStatus()\r\n           \r\n            }else{\r\n                this.status='';\r\n                this.message='';\r\n                this.wait()\r\n            }\r\n         },\r\n          closeSelect(){\r\n      document.getElementById(\"select-ch\").checked = false;\r\n      this.active = false;\r\n    },\r\n\r\n\r\n\r\n\r\n\r\n\r\n        search: async function(value){\r\n            let option = 'project';\r\n           \r\n          \r\n            let payload ={\r\n              option : option,\r\n              search: value\r\n            }\r\n            if(value!=\"\"){\r\n                this.$store.dispatch(\"project/searchPrj\", payload);\r\n            }else{\r\n               this.getAllInfoPrj('project')\r\n            }\r\n         },\r\n\r\n\r\n         // botones de paginacion.\r\n         next () {\r\n          \r\n          if ( this.currentPage < this.totalPages) {\r\n            this.currentPage++\r\n          }\r\n        },\r\n        prev () {\r\n          if (this.currentPage > 1) {\r\n            this.currentPage--\r\n          }\r\n        },\r\n        \r\n        \r\n\r\n\r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n.tbl_project{\r\n      margin-top: 1.9791666666666665VW;\r\n            width: 45.4VW;\r\n}\r\n\r\n.tbl_items{\r\n      border-bottom: 1px solid var(--color-4);\r\n    align-items: center;\r\n}\r\n\r\n.tbl_item{\r\n    overflow: auto;\r\n}\r\n      .tblh{\r\n            width: 10.78125VW;\r\n            height: 2.5VW;\r\n            background: var(--color-2);\r\n            border-right: 1px solid  var(--color-5); \r\n      }\r\n       .tblh2{\r\n            width: 2.5VW;\r\n            height: 2.5VW;\r\n            background: var(--color-3);\r\n            border-right: 1px solid  var(--color-5);\r\n           \r\n      }\r\n      .tblh p{\r\n             padding-left: 1.3541666666666667VW;\r\n             color: var(--color-5);\r\n             font-size: 0.7291666666666666VW;\r\n             font-weight: 500;\r\n    margin-top: 0.8vw;\r\n      }\r\n      .tblh2 p{\r\n    padding-top: 0.95VW;\r\n             padding-left: .3vw;\r\n             color: var(--color-5);\r\n             font-size: 0.46875VW;\r\n             font-weight: 700;\r\n      }\r\n\r\n       .icon_editar , .icon_eliminar{\r\n            width: 2.5VW;\r\n            height: 2.5VW; \r\n            \r\n      }\r\n\r\n       .icon_editar img , .icon_eliminar img{\r\n       \r\n             width:  0.8333333333333334VW;\r\n            height:   0.8333333333333334VW; \r\n            padding-top: .9vw;\r\n            padding-left: .9vw;\r\n            cursor: pointer;\r\n      }\r\n      .tblrad{\r\n            border-radius: 1.5vw 0vw 0vw 1.5vw;\r\n      }\r\n\r\n      .tblh2r{\r\n            border-radius:  0vw .5vw .5vw 0vw ;\r\n      }\r\n\r\n      .tbl_item{\r\n             width: 10.78125VW;\r\n      } .tbl_item p{\r\n             padding-left: 1.3541666666666667VW;\r\n             color: var(--color-4);\r\n      }\r\n      .tbl_item a{\r\n             padding-left: 1.3541666666666667VW;\r\n              color: var(--color-4);\r\n      }\r\n\r\n      .mlf{\r\n          margin-left: 39.5VW !important;\r\n      }\r\n\r\n\r\n      .tlarg{\r\n        width: 29vw !important;\r\n      }\r\n</style>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}